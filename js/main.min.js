!function($,_,undefined){var apiUrl=altruismObj.root,$el=$("#js-data"),$branding=$("#branding");$branding.click(function(event){event.preventDefault(),router.setRoute("/")}),$("li.menu-item-object-page a","#primary-menu").click(function(event){event.preventDefault();var slug=$(this).data("name");router.setRoute("/"+slug),$("html, body").animate({scrollTop:0},"slow")});var viewPost=function(year,month,postName){$.get(apiUrl+"/wp/v2/posts/?slug="+postName+"&_embed",function(data){var output=data[0],template=_.template($("#post-tmpl").html());$el.html(template(output))})},viewPage=function(pageName){$.get(apiUrl+"/wp/v2/pages/?slug="+pageName+"&_embed",function(data){var output=data[0];template=_.template($("#post-tmpl").html()),$el.html(template(output))})},listPostswithPagination=function(page){page="undefined"!=typeof page?page:"1",$.get(apiUrl+"/wp/v2/posts?page="+page,function(data,textStatus,jqxhr){var template,output={data:data},currentPage=parseInt(page,10),maxPages=parseInt(jqxhr.getResponseHeader("X-WP-TotalPages"),10);currentPage>1&&(output.previous=currentPage-1),currentPage<maxPages&&(output.next=currentPage+1),template=_.template($("#posts-tmpl").html()),$el.html(template(output)),$(".js-single-post").click(function(event){event.preventDefault();var slug=$(this).data("name");router.setRoute("/"+slug),$("html, body").animate({scrollTop:0},"slow")})})},routes={"/":listPostswithPagination,"/:page":listPostswithPagination,"/:year/:month/:postName":viewPost,"/p/:pageName":viewPage},router=new window.Router(routes);router.configure({html5history:!0}),router.init()}(jQuery,_);